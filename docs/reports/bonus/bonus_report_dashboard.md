# Bonus Report Dashboard

## üìä Report Purpose

The Bonus Report Dashboard provides detailed performance analysis of bonus campaigns and promotions. This report tracks player engagement, conversion rates, cost efficiency, and ROI for each bonus campaign, enabling stakeholders to optimize marketing spend and campaign design.

**Use this report to:**
- Evaluate individual bonus campaign performance
- Calculate campaign ROI and cost efficiency
- Track bonus conversion and player engagement
- Compare performance across different bonus types
- Optimize bonus terms and conditions
- Allocate marketing budget effectively

---

## üìà Key Metrics (18 Total)

### **Player Engagement Metrics**

#### **1. BONUS GRANTED PLAYERS**
- **What it measures:** Unique players who received the bonus
- **Calculation:** COUNT(DISTINCT player_id) with activated bonus
- **Why it matters:** Reach and audience size of campaign

#### **2. % CONVERTED PLAYERS**
- **What it measures:** Percentage of players who completed wagering
- **Calculation:** `(Converted Players / Granted Players) √ó 100`
- **Why it matters:** Campaign stickiness and completion rate
- **Healthy range:** 15-35%

### **Financial Metrics**

#### **3. BONUS COST**
- **What it measures:** Total cost of bonuses that converted to real cash
- **Calculation:** Sum of `bonus_completion` transactions (withdrawable balance)
- **Why it matters:** Actual marketing expense of campaign
- **Note:** This is the "real" cost, not granted amount

#### **4. DEPOSIT AMOUNT**
- **What it measures:** Total deposits from players in this campaign
- **Calculation:** Sum of deposit transactions linked to player_bonus_id
- **Why it matters:** Revenue generated by campaign

#### **5. ROI %**
- **What it measures:** Return on investment of the bonus campaign
- **Calculation:** `((Deposit Amount - Bonus Cost) / Bonus Cost) √ó 100`
- **Why it matters:** Profitability indicator
- **Healthy range:** 150-400% (meaning 1.5x-4x return)
- **Example:** ‚Ç¨10,000 bonus cost ‚Üí ‚Ç¨30,000 deposits = 200% ROI

#### **6. BONUS COST / PLAYER**
- **What it measures:** Average bonus cost per granted player
- **Calculation:** `Bonus Cost / Granted Players`
- **Why it matters:** Efficiency metric, compare across campaigns

#### **7. DEPOSIT AMOUNT / PLAYER**
- **What it measures:** Average deposits per player in campaign
- **Calculation:** `Deposit Amount / Granted Players`
- **Why it matters:** Revenue efficiency per player

### **Bonus Value Metrics**

#### **8. GRANTED CASH**
- **What it measures:** Direct cash bonuses issued (no wagering)
- **Calculation:** Sum of bonus credits with `balance_type='withdrawable'`
- **Why it matters:** Instant cash promotions tracking

#### **9. GRANTED BONUS**
- **What it measures:** Total bonus value issued (requires wagering)
- **Calculation:** Sum of bonus credits with `balance_type='non-withdrawable'` and `player_bonus_id IS NOT NULL`
- **Includes:** Regular bonuses, free spin values, free bet values
- **Why it matters:** Marketing investment before conversion

#### **10. GRANTED BONUS / PLAYER**
- **What it measures:** Average bonus value per player
- **Calculation:** `Granted Bonus / Granted Players`
- **Why it matters:** Generosity level of campaign

#### **11. BONUS REVOKED**
- **What it measures:** Bonus value forfeited (expired or canceled)
- **Calculation:** Sum of revoked bonus amounts
- **Why it matters:** Shows drop-off, wasted marketing spend
- **Low is good:** Indicates engaging bonus terms

#### **12. BONUS CONVERTED (GROSS)**
- **What it measures:** Total bonus amount converted to any balance
- **Calculation:** Sum of `bonus_completion` transactions (all types)
- **Why it matters:** Total conversion volume

#### **13. BONUS CONVERTED / PLAYER**
- **What it measures:** Average converted amount per player
- **Calculation:** `Bonus Converted / Granted Players`
- **Why it matters:** Player-level conversion efficiency

### **Free Spins Metrics**

#### **14. GRANTED FREESPINS**
- **What it measures:** Total number of free spins issued
- **Calculation:** Sum of `free_spins_count` from player_bonuses
- **Why it matters:** Volume of free spin promotions

#### **15. FREESPINS WIN (BONUS)**
- **What it measures:** Winnings from free spins credited as bonus balance
- **Calculation:** Sum of free_spin wins (non-withdrawable)
- **Why it matters:** Bonus value generated from free spins

#### **16. FREESPINS WIN (CASH)**
- **What it measures:** Winnings from free spins credited as real cash
- **Calculation:** Sum of free_spin wins (withdrawable)
- **Why it matters:** Direct cost of free spin campaigns

#### **17. % FREESPINS PLAYED**
- **What it measures:** Percentage of granted spins actually played
- **Current status:** N/A - No game_round data available
- **Why it matters:** Would show engagement with free spin offers

### **Campaign Classification**

#### **18. CAMPAIGN CATEGORY**
- **What it shows:** Type of bonus campaign
- **Values:** deposit_bonus, no_deposit_bonus, free_spins, free_bet, cashback, etc.
- **Why it matters:** Segment analysis by campaign type

---

## üîß Available Filters (25 Total)

### **Campaign Filters (18)**

| Filter | Parameter | Description | Options |
|--------|-----------|-------------|---------|
| **Brand** | `{{brand_filter}}` | Company/brand | Dropdown |
| **Campaign Name** | `{{campaign_name_filter}}` | Specific bonus campaign | Dropdown (bonus titles) |
| **Promotion Name** | `{{promotion_name_filter}}` | Associated promotion | Dropdown |
| **Template Code** | `{{template_code_filter}}` | Promotion template | Text input |
| **Player** | `{{player_filter}}` | Specific player ID | Numeric input |
| **Campaign Category** | `{{campaign_category_filter}}` | Bonus type | Dropdown (deposit_bonus, etc.) |
| **Bonus Trigger** | `{{bonus_trigger_filter}}` | How bonus activates | manual, auto_on_deposit, etc. |
| **Lifecycle Status** | `{{lifecycle_filter}}` | Bonus status | active, completed, expired, revoked |
| **Wager Factor** | `{{wager_factor_filter}}` | Wagering multiplier | Numeric (e.g., 30x, 40x) |
| **Wagering Condition** | `{{wagering_condition_filter}}` | Wagering type | bonus_only, deposit_and_bonus |
| **Wager Time** | `{{wager_time_filter}}` | Time to complete wagering | Numeric (days/hours) |
| **Bonus Availability** | `{{bonus_availability_filter}}` | Time to activate bonus | Numeric (days/hours) |
| **Max Bonus Reward** | `{{max_bonus_reward_filter}}` | Maximum bonus value | Numeric (currency) |
| **Max Bonus Release** | `{{max_bonus_release_filter}}` | Maximum conversion amount | Numeric (currency) |
| **Percentage Amount** | `{{percentage_amount_filter}}` | Match percentage | Numeric (e.g., 100%, 200%) |
| **Minimum Deposit** | `{{minimum_deposit_filter}}` | Required deposit amount | Numeric (currency) |
| **Max Bet** | `{{max_bet_filter}}` | Maximum bet during wagering | Numeric (currency) |
| **FS Wagering Factor** | `{{fs_wagering_factor_filter}}` | Free spin wagering multiplier | Numeric |

### **Organizational Filters (4)**

| Filter | Parameter | Description | Options |
|--------|-----------|-------------|---------|
| **Traffic Source** | `{{traffic_source_filter}}` | Acquisition channel | ORGANIC, AFFILIATE |
| **Date Range** | `{{date_range_filter}}` | Campaign activation dates | Date range picker |

### **Player Attribute Filters (3)**

| Filter | Parameter | Description | Options |
|--------|-----------|-------------|---------|
| **Country** | `{{country}}` | Player country | Dropdown (country names) |
| **Registration Launcher** | `{{registration_launcher_filter}}` | Device/browser | OS / Browser format |

### **Affiliate Filters (2)**

| Filter | Parameter | Description | Options |
|--------|-----------|-------------|---------|
| **Affiliate ID** | `{{affiliate_id}}` | Specific affiliate | Numeric input |
| **Affiliate Name** | `{{affiliate_name}}` | Affiliate name | Text input |

### **Test Account Filter (1)**

| Filter | Parameter | Description | Default |
|--------|-----------|-------------|---------|
| **Test Accounts** | `{{is_test_account}}` | Include test players | Excluded |

---

## üìä Report Structure

### **Output Format**

The report displays campaigns with a **TOTAL row at the top**, followed by individual campaigns:

```
TOTAL            ‚Üê Aggregated across all campaigns
Welcome Bonus    ‚Üê Individual campaign
Reload Bonus
Free Spin Friday
...
```

### **Column Layout**

| Column | Description |
|--------|-------------|
| **CAMPAIGN NAME** | Name of the bonus campaign |
| **BONUS GRANTED PLAYERS** | Players who received bonus |
| **BONUS COST** | Actual cost (converted to cash) |
| **DEPOSIT AMOUNT** | Deposits from campaign players |
| **ROI%** | Return on investment |
| **BONUS COST / PLAYER** | Average cost per player |
| **DEPOSIT AMOUNT / PLAYER** | Average deposit per player |
| **GRANTED CASH** | Direct cash bonuses |
| **GRANTED BONUS** | Wagering bonuses issued |
| **BONUS REVOKED** | Forfeited bonuses |
| **BONUS CONVERTED (GROSS)** | Total converted amount |
| **% CONVERTED PLAYERS** | Conversion rate |
| **GRANTED BONUS / PLAYER** | Average bonus per player |
| **BONUS CONVERTED / PLAYER** | Average conversion per player |
| **GRANTED FREESPINS** | Free spins issued |
| **FREESPINS WIN (BONUS)** | Free spin bonus wins |
| **FREESPINS WIN (CASH)** | Free spin cash wins |
| **% FREESPINS PLAYED** | N/A (data unavailable) |
| **CAMPAIGN CATEGORY** | Bonus type |

---

## üßÆ Key Calculation Details

### **Bonus Cost vs Granted Bonus**
**Important distinction:**
- **Granted Bonus:** Amount issued to players (‚Ç¨10,000)
- **Bonus Cost:** Amount actually converted to cash (‚Ç¨3,000)
- **Why different:** Not all players complete wagering

**Example:**
```
Granted: ‚Ç¨100 bonus to 100 players = ‚Ç¨10,000
Completed wagering: 30 players
Converted: 30 players √ó ‚Ç¨100 = ‚Ç¨3,000 (actual cost)
Revoked: 70 players √ó ‚Ç¨100 = ‚Ç¨7,000 (no cost)
```

### **ROI Calculation**

```
Scenario:
- Bonus Cost = ‚Ç¨5,000 (actual cost after conversions)
- Deposits Generated = ‚Ç¨25,000

ROI = ((‚Ç¨25,000 - ‚Ç¨5,000) / ‚Ç¨5,000) √ó 100 = 400%

Interpretation:
- For every ‚Ç¨1 spent, generated ‚Ç¨5 in deposits
- ‚Ç¨4 profit per ‚Ç¨1 investment
- Highly profitable campaign
```

### **Conversion Rate Analysis**

```
Granted Players: 200
Converted Players: 60

% Converted = (60 / 200) √ó 100 = 30%

Interpretation:
- 30% completion rate
- Healthy conversion (above 15% threshold)
- 70% abandoned (check bonus terms complexity)
```

### **Currency Handling**
- All amounts use EUR conversion: `COALESCE(eur_amount, amount)`
- Multi-currency transactions converted to EUR
- NULL-safe calculations

---

## üí° How to Interpret Results

### **ROI% Interpretation**

| ROI % | Meaning | Action |
|-------|---------|--------|
| **<100%** | Losing money | Stop or redesign campaign |
| **100-150%** | Breaking even/marginal | Optimize terms or discontinue |
| **150-300%** | Profitable | Good campaign, continue |
| **300%+** | Highly profitable | Scale up, model other campaigns |

### **% Converted Players**

| Rate | Meaning | Assessment |
|------|---------|------------|
| **<10%** | Very low | Terms too complex, investigate |
| **10-20%** | Below average | Review wagering requirements |
| **20-35%** | Healthy | Well-designed campaign |
| **35%+** | Excellent | Terms well-balanced |

### **Bonus Cost / Player**

Compare across campaigns to find efficiency:
- **Low cost, high deposits:** Ideal campaign
- **High cost, low deposits:** Review targeting
- **Consistent ratio:** Stable campaign performance

### **Red Flags**

Watch for:
- **High Granted Bonus, Low Bonus Cost:** Players not converting (terms too hard)
- **High Revoked Amount:** Players abandoning bonuses (poor terms)
- **Low ROI with High Cost:** Unprofitable, stop immediately
- **Low Deposit/Player ratio:** Poor player quality or targeting

---

## üéØ Common Use Cases

### **1. Campaign Performance Review**
```
Question: Which campaigns are most profitable?

Steps:
1. Run report with no filters (all campaigns)
2. Sort by ROI% descending
3. Identify top 5 performers
4. Analyze common characteristics (wager factor, category, etc.)
5. Model new campaigns after winners
```

### **2. Bonus Terms Optimization**
```
Question: Are our wagering requirements too difficult?

Analysis:
- Check % Converted Players
- Compare Granted vs Revoked amounts
- If conversion <15%: Lower wager factor or increase time
- If conversion >35%: Can increase difficulty slightly
```

### **3. Budget Allocation**
```
Scenario: ‚Ç¨50,000 marketing budget to allocate

Method:
1. Find campaigns with ROI >250%
2. Calculate: Budget √ó (Campaign ROI / 100)
3. Expected return: ‚Ç¨50K √ó 2.5 = ‚Ç¨125K deposits
4. Allocate proportionally to top performers
```

### **4. Player Segment Analysis**
```
Question: Do Organic players convert better than Affiliate?

Steps:
1. Run report with Traffic Source = ORGANIC
2. Note average % Converted Players
3. Run report with Traffic Source = AFFILIATE
4. Note average % Converted Players
5. Compare and adjust acquisition strategy
```

### **5. Free Spin Effectiveness**
```
Question: Are free spin campaigns cost-effective?

Analysis:
- Filter Campaign Category = free_spins
- Compare: (Granted Freespins √ó spin value) vs Deposits
- Check FREESPINS WIN (CASH) - this is the cost
- Calculate ROI for free spin campaigns specifically
```

### **6. Country-Specific Performance**
```
Question: Which countries have best bonus conversion?

Steps:
1. Run report multiple times, each with different Country filter
2. Record % Converted Players for each
3. Identify best-performing countries
4. Increase bonus marketing in those regions
```

---

## ‚ö†Ô∏è Important Notes

### **Duplicate Prevention**
- Report uses `DISTINCT ON` to prevent duplicate rows
- Multiple promotions per bonus handled correctly
- Version 3.1 fixed historical duplication issues

### **Granted Bonus Logic**
- Filters by `player_bonus_id IS NOT NULL`
- Only includes **campaign-based bonuses**
- Excludes system-generated bonuses
- **Aligned with Daily Email Report** (November 2025)

### **Date Range Filter**
- Filters by bonus **activation date**, not transaction date
- All metrics calculated for lifetime of those bonuses
- Example: Filter "October 2025" shows bonuses activated in October, but includes all their subsequent activity

### **Lifecycle Status**
- **active:** Currently wagering
- **completed:** Wagering completed
- **expired:** Time ran out
- **revoked:** Manually canceled or player-abandoned

### **Free Spins Data Limitation**
- **% FREESPINS PLAYED** currently unavailable
- Requires game_round table integration
- Shows "N/A - No game_round data" placeholder

### **Test Accounts**
- Excluded by default
- Include only for campaign testing/validation
- Never include in production analysis

---

## üìä Example Interpretation

```
Campaign: Welcome Bonus 100%

BONUS GRANTED PLAYERS: 850
BONUS COST: ‚Ç¨12,500
DEPOSIT AMOUNT: ‚Ç¨68,000
ROI%: 444%
BONUS COST / PLAYER: ‚Ç¨14.71
DEPOSIT AMOUNT / PLAYER: ‚Ç¨80.00
GRANTED BONUS: ‚Ç¨42,500
BONUS REVOKED: ‚Ç¨30,000
% CONVERTED PLAYERS: 29.4%

Analysis:
‚úÖ Excellent ROI (444% - highly profitable)
‚úÖ Healthy conversion (29.4%)
‚ö†Ô∏è High revoke rate (‚Ç¨30K / ‚Ç¨42.5K = 71% didn't complete)
‚úÖ Strong deposit per player (‚Ç¨80)
‚úÖ Efficient cost per player (‚Ç¨14.71)

Recommendation:
- Continue campaign (very profitable)
- Consider: Simplify terms to reduce revoke rate
- Potential: Lower wager factor from 40x to 35x
- Could increase conversion to 35%+ and reduce waste
```

---

## üìû Questions & Support

**For campaign setup:** Contact Marketing Team with bonus terms

**For ROI calculations:** Contact Finance Team with campaign data

**For data accuracy:** Contact Technical Team with campaign name and metric

**For bonus optimization:** Contact Analytics Team for A/B test recommendations

---

**Last Updated:** November 2025
**Version:** v3.1 (Duplicate rows fixed, 25 filters active)
**Report Location:** `sql_reports_adjusted/bonus/bonus_report_dashboard.sql`
